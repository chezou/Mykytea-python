language: python

matrix:
  include:
  - os: osx
    language: generic
    env: PYTHON="2.7.9"
  - os: osx
    language: generic
    env: PYTHON="3.5.2"
  - os: linux
    sudo: required
    python: 2.7
  - os: linux
    python: 3.5

compiler:
  - gcc
  - clang

addons:
  apt:
    packages:
      - swig


before_install:
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then
      brew install swig;
      brew outdated pyenv || brew upgrade pyenv;
      brew install pyenv-virtualenv;
      pyenv install $PYTHON;
      export PYENV_VERSION=$PYTHON;
      export PATH="/Users/travis/.pyenv/shims:${PATH}";
      pyenv-virtualenv venv;
      source venv/bin/activate;
      python --version;
    fi
  - wget http://www.phontron.com/kytea/download/kytea-0.4.7.tar.gz
  - tar zxf kytea-0.4.7.tar.gz
  - pushd kytea-0.4.7 && ./configure && make && sudo make install && popd
  - rm -r kytea-0.4.7
  - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then sudo ldconfig; fi 

install:
  - make
  - make install

script:
  - make test
